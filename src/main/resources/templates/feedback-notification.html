<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>New Customer Feedback</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Keep styles minimal for email rendering -->
    <style>
        body {
          margin: 0;
          padding: 0;
          background: #ffffff;
          color: #222222;
          line-height: 1.5;
          font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Arial, Helvetica, sans-serif;
          font-size: 16px;
        }
        .wrapper {
          width: 100%;
          background: #ffffff;
        }
        .container {
          max-width: 640px;
          margin: 0 auto;
          padding: 24px 16px;
        }
        h1, h2, h3, p, ul {
          margin: 0 0 12px;
        }
        h1 {
          font-size: 20px;
          font-weight: 600;
        }
        h2 {
          font-size: 16px;
          font-weight: 600;
          margin-top: 16px;
        }
        .meta {
          color: #555555;
          font-size: 14px;
        }
        .divider {
          height: 1px;
          background: #e6e6e6;
          margin: 16px 0;
        }
        .small {
          font-size: 13px;
          color: #666666;
        }
        .anonymous-badge {
          display: inline-block;
          background: #f3f4f6;
          color: #6b7280;
          padding: 4px 8px;
          border-radius: 12px;
          font-size: 12px;
          font-weight: 500;
          margin-left: 8px;
        }
        a {
          color: #0b5fff;
          text-decoration: none;
        }
        /* Dark-mode friendly-ish */
        @media (prefers-color-scheme: dark) {
          body { background: #000; color: #eaeaea; }
          .meta, .small { color: #b5b5b5; }
          .divider { background: #2a2a2a; }
          .anonymous-badge { background: #374151; color: #9ca3af; }
          a { color: #7aa7ff; }
        }
    </style>
</head>
<body>
<div class="wrapper">
    <div class="container">

        <p class="meta" th:text="${appName}">ReviewGate</p>
        <h1>New customer feedback</h1>

        <p>Hello <strong th:text="${businessOwnerName}">Business Owner</strong>,</p>
        <p>You received new feedback for <strong th:text="${businessName}">Business Name</strong>.</p>

        <div class="divider"></div>

        <h2>Summary</h2>
        <p>
            <strong>Rating:</strong>
            <span th:text="${rating + ' / 5'}">3 / 5</span>
        </p>

        <p class="meta">
            <strong>Customer:</strong>
            <span th:text="${customerName}">Customer Name</span>
            <span th:if="${isAnonymous}" class="anonymous-badge">Anonymous</span>
            <br>

            <!-- Only show email if not anonymous and email exists -->
            <span th:if="${!isAnonymous and customerEmail != null and !#strings.isEmpty(customerEmail)}">
                <strong>Email:</strong> <span th:text="${customerEmail}">customer@email.com</span><br>
            </span>

            <strong>Submitted:</strong> <span th:text="${submittedDate}">Date</span>
        </p>

        <div class="divider" th:if="${reviewComment != null and !#strings.isEmpty(reviewComment)}"></div>

        <div th:if="${reviewComment != null and !#strings.isEmpty(reviewComment)}">
            <h2>Review comment</h2>
            <p th:text="${reviewComment}">Customer's review comment</p>
        </div>

        <div class="divider" th:if="${feedbackText != null and !#strings.isEmpty(feedbackText)}"></div>

        <div th:if="${feedbackText != null and !#strings.isEmpty(feedbackText)}">
            <h2>Additional feedback</h2>
            <p th:text="${feedbackText}">Customer's additional feedback</p>
        </div>

        <div class="divider"></div>

        <h2>Detailed ratings</h2>
        <ul style="padding-left: 18px; margin-top: 8px;">
            <li th:if="${serviceQuality != null}">
                <strong>Service quality:</strong>
                <span th:text="${#strings.capitalize(serviceQuality)}">Good</span>
            </li>
            <li th:if="${staffBehavior != null}">
                <strong>Staff behavior:</strong>
                <span th:text="${#strings.capitalize(staffBehavior)}">Good</span>
            </li>
        </ul>

        <div class="divider" th:if="${suggestions != null and !#strings.isEmpty(suggestions)}"></div>

        <div th:if="${suggestions != null and !#strings.isEmpty(suggestions)}">
            <h2>Suggestions</h2>
            <p th:text="${suggestions}">Customer suggestions</p>
        </div>

        <div class="divider" th:if="${wantsFollowup and !isAnonymous}"></div>

        <div th:if="${wantsFollowup and !isAnonymous}">
            <h2>Customer requested a follow-up</h2>
            <p th:if="${contactEmail != null}">
                <strong>Email:</strong>
                <span th:text="${contactEmail}">contact@email.com</span>
            </p>
            <p th:if="${contactPhone != null}">
                <strong>Phone:</strong>
                <span th:text="${contactPhone}">contact phone</span>
            </p>
        </div>

        <div class="divider"></div>

        <p class="small">
            This email was sent by <span th:text="${appName}">ReviewGate</span> because you received customer feedback.
            You're getting this as the owner of <span th:text="${businessName}">Business Name</span>.
        </p>

    </div>
</div>
</body>
</html>